vocab mlatu {
  intrinsic abort (∀ r... s... . r..., string -> s...)
  intrinsic exit (∀ r... s... . r..., int -> s...)
}

define abort (∀ r... s... . r... -> s...) { "abort called" fail }

define assert (string, (-> bool) ->) {
  call not
  if { fail }
  else {  drop }
}

define assert-eq (∀ t . string, t, t ->) {
  -> x, y;
  { x y = } assert
}

define exit (∀ r... s... . r..., int -> s...) { mlatu::exit }

define fail (∀ r... s... . r..., string -> s...) { mlatu::abort }
